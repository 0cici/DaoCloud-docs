# 服务网格 Release Notes

本页列出服务网格各版本的 Release Notes，便于您了解各版本的演进路径和特性变化。

## 2023-03-30

### v0.14.0

#### 新功能

- 新增 CloudShell 相关接口定义
- 新增更新服务的标签实现
- 新增服务列表和详情会返回 labels
- 新增 CloudShell 相关实现
- 新增服务列表支持对服务标签的查询
- 新增了一个新的 API，用于更新服务的标签
- 新增 istio 1.17.1 支持
- 新增了一个新的 etcd 高可用方案
- 新增场景化测试框架，用于测试场景化的功能
- 新增选择不同网格规模时，自动调整组件资源配置
- 新增了自定义角色的实现，支持自定义角色的创建、更新、删除、绑定、解绑等操作

#### 优化

- 优化 mcpc controller 启动逻辑，避免出现工作集群没有正确注册的情况
- 优化 WorkloadShadow 清理逻辑：由定时触发改造事件触发：控制器启动时、检测到工作集群发生变化时；
  WorkloadShadow 发生变化时，自健康检测，对应工作负载不存在时，触发清理逻辑
- 优化 mcpc controller 启动逻辑，避免出现工作集群没有正确注册的情况
- 升级 Insight api 升级到 v0.14.7 版本
- 升级 ckube 支持 labels 的复杂条件查询
- 移除 移除 Helm 升级时间限制

#### 修复

- 修复东西网关没 Ready 时界面无显示的问题
- 修复多云互联会自动注册东西网关 LB IP，可能导致内部网络异常（移除东西网关实例 label：topology.istio.io/network， 该标签会将东西网关自动注册）
- 修复携带东西网关的集群迁移会出错问题（无法修改实例的 label，如果需要修改组件 label 只能删除组件再重建）
- 修复了一个导致 Mesh 绑定 workspace 服务失败（界面显示成功）的问题
- 修复由于异常导致虚拟集群中存在游离的命名空间，在启动 mcpc-controller 时增加自检并且清除行为
- 修复由于 controller 更新网格，导致 api 下发网格配置失败
- 修复创建托管网格时，ServicePort 的 TargetPort 未正确设置的问题
- 修复 GlobalMesh.Status.MeshVersion 错误覆盖问题
- 修复 mcpc-controller 无法开启 debug 模式问题
- 修复 mcpc-controller 无法触发集群删除事件
- 修复删除 Mesh 再重建同名的 Mesh 时，会导致 Mesh 无法正常创建的问题（hosted proxy 无法正常更新）
- 修复 mcpc controller 在某些情况下没有正确修改 istiod-remote 的 service 的问题

## 2023-02-28

### v0.13.1

#### 新功能

- 多云网络互联管理及相关接口
- 网格全局配置能力（网格系统配置、全局流量治理能力、全局边车注入设置）增强
- 支持 zookeeper 代理

#### 优化

- Namespace 控制器加上 Cache，当集群中 Namespace 过多时会造成太多的重复的 Get 请求
- 减少正常模式下 ckube 的日志输出

#### 修复

- 由容器管理平台移除集群导致的网格相关逻辑错误
- RegProxy 注入 Sidecar 会导致 Nacos 无法注册的问题
- Spring Cloud 服务识别错误的问题
- 没有同步容器管理平台 Cluster 状态信息
- 流量透传策略 - 流量筛选 IP 段配置未生效
- 流量透传策略 - 流量透传策略无法删除
- 获取网格配置时，由于配置路径不存在导致返回错误

## 2022-12-29

### v0.12.0

#### 新功能

- 流量透传功能的接口实现
- 对 istio 1.15.4、1.16.1 的支持

#### 优化

- 命名空间边车管理页面中增加“未设置”边车策略，避免命名空间层面的边车策略对工作负载层面产生连带影响；
- 发布流水线参数优化
- 优化边车注入、边车资源限制逻辑、避免出现不同步现象

#### 修复

- 网格升级后部分组件未更新的问题
- 网格移除后部分资源未清除的问题 - 边车资源同步不正确，改为通过 Pod 中的 istio-proxy 容器的实际边车资源
- 托管集群无法作为工作集群
- 当边车注入实例为 0/0 时注入情况显示不正确
- 取消边车注入后仍然显示边车相关信息

## 2022-11-30

### v0.11.1

#### 新功能

- `密钥管理`相关 API
- 在`虚拟服务`、`目标规则`、`网关规则`列表新增治理策略标签及相关筛选能力
- 网格中集群健康状态检查能力
- otel sdk 接入
- secret 的多个接口实现
- 对 istio 1.15.3 的支持

#### 优化

- 重工作负载边车注入接口，防止出现问题
- 网格服务监控面板默认展开
- 禁用网格全局监控面板子链接跳转，避免出现界面混乱现象
- 优化网格控制面处理流程，避免更新已经更新过的 object 导致冲突
- 优化网格的集群接入、移除逻辑

#### 修复

- 当控制面 MSpider 升级之后，mcpc 等组件未更新的问题
- 获取集群资源错误
- 获取集群命名空间列表接口集群名称不存在时响应码为 200 情况
- 网格升级流程中前置条件判断有误的问题
- 网格升级未执行 k8s 版本限制的问题
- 边车管理接口工作负载边车资源配置失效的问题
- 因网格内集群的监控检测失败导致集群无法移除的问题
- 数据面的镜像没有被打包到 DCE 5.0 的离线包中
- Ckube 无法自动更新配置的问题
