---
hide:
  -toc
---

# 创建热点规则

热点即经常被访问的数据。例如在以下场景中需要统计某个热点数据中访问频次最高的Top数据，并对其访问进行限制。

针对一段时间内最频繁购买的商品ID进行限制，防止击穿缓存而导致大量请求到数据库的情形。
针对一段时间内频繁访问的用户ID进行限制，防止恶意刷单。

创建热点规则的方式如下：

1. 点击目标托管注册中心的名称，然后在左侧导航栏点击`微服务列表`，在最右侧点击更多按钮选择`治理`。

    > 注意需要治理的微服务在`是否可以治理`一栏应该显示为`是`，才能进行后续步骤。

    ![微服务列表](../../../images/gov00.png)

2. 选择`流控规则`，然后在右侧点击`创建流控规则`。

    ![微服务列表](../../../images/gov01.png)

3. 参考下列说明填写规则配置，并在右下角点击`确定`。

    - 资源名：需要控制哪个资源的流量就填写哪个资源的名称。
    - 参数位置索引：埋点传入参数的索引位置。对应SphU.entry(xxx,args)中的参数索引位置。例如SphU.entry(resourceName,Entry Type.IN,1,paramA,paramB)埋点中，paramA的参数索引是0，paramB的参数索引是1。
    - 统计周期时间：统计窗口时间长度（单位为秒）。例如统计窗口时长为10s，QPS阈值为5代表限制10s内每个热点参数访问不超过5次。
    - 阈值：是作用于每个热点参数的阈值。
    - 参数例外项：可以针对指定的参数值单独设置限流阈值，不受前面限阈值的限制
        
        ![微服务列表](../../../images/gov02.png)

4. 创建完成后可以在流控规则列表中查看新建的规则。在右侧点击更多按钮可以编辑更新规则或者删除该规则。

    ![流控规则列表](../../../images/gov03.png)
