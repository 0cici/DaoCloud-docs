---
hide:
  -toc
---

# 创建系统规则

系统保护规则是从应用级别的入口流量进行控制，从单台机器的总体 Load、RT、入口 QPS 和线程数四个维度监控应用数据，让系统尽可能跑在最大吞吐量的同时保证系统整体的稳定性。

创建系统规则的方式如下：

1. 点击目标托管注册中心的名称，然后在左侧导航栏点击`微服务列表`，在最右侧点击更多按钮选择`治理`。

    > 注意需要治理的微服务在`是否可以治理`一栏应该显示为`是`，才能进行后续步骤。

    ![微服务列表](../../../images/gov00.png)

2. 选择`流控规则`，然后在右侧点击`创建流控规则`。

    ![微服务列表](../../../images/gov01.png)

3. 参考下列说明填写规则配置，并在右下角点击`确定`。

    - 资源名：需要控制哪个资源的流量就填写哪个资源的名称。
    - Load：当系统 load1 超过阈值，且系统当前的并发线程数超过系统容量时才会触发系统保护。系统容量由系统的 maxQps * minRt 计算得出。设定参考值一般是 CPU cores * 2.5。
    - RT：当单台机器上所有入口流量的平均 RT 达到阈值即触发系统保护，单位是毫秒。
    - 线程数：当单台机器上所有入口流量的并发线程数达到阈值即触发系统保护。
    - 入口 QPS：当单台机器上所有入口流量的 QPS 达到阈值即触发系统保护。
    - CPU 使用率：当系统 CPU 使用率超过阈值即触发系统保护（取值范围 0.0-1.0）。

        ![微服务列表](../../../images/gov02.png)

4. 创建完成后可以在流控规则列表中查看新建的规则。在右侧点击更多按钮可以编辑更新规则或者删除该规则。

    ![流控规则列表](../../../images/gov03.png)
