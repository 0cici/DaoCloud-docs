# 部署规划

部署 DCE 5.0 时需要先做好软件规划、硬件规划、网络规划。

## 软件规划

### 服务器系统要求

| **架构** | **操作系统**        | **内核版本**                               | 备注                    |
| -------- | ------------------- | ------------------------------------------ | ----------------------- |
| AMD 64   | centos 7.X          | Kernel 3.10.0-1127.el7.x86_64 on an x86_64 | 操作系统推荐 centos 7.9 |
|          | Redhat 8.X          | 4.18.0-305.el8.x86_64                      | 操作系统推荐 Redhat 8.4 |
| ARM 64   | 银河麒麟 OS V10 SP2 | 4.19.90-24.4.v2101.ky10.aarch64            |                         |

### 客户端浏览器的要求

Firefox **≥** 49 ，Chrome **≥** 54。

## 硬件规划

| **类型** | **具体要求**                                           | **推荐型号或配置** |
| -------- | ------------------------------------------------------ | ------------------ |
| cpu      | 在 iaas 层不得超售，主频不得小于 2.6GHz                | intel E5-2660V3    |
| 内存     | 在 iaas 层不得超售                                     | DDR4 2133          |
| 硬盘     | iops > 500 吞吐量 >200M/s                              | ssd                |
| GPU      | 仅支持使用 418.87.00 CUDA Version: 10.1 这个驱动的 GPU | Nvidia             |

## 网络规划

### 使用 metallb 作为全局集群的负载均衡方式

| **资源**          | **要求** | **说明**                                                     |
| ----------------- | -------- | ------------------------------------------------------------ |
| `istioGatewayVip` | 1 个     | 如果负载均衡模式是metallb，则需要指定一个VIP，供给DCE的UI界面和OpenAPI访问入口 |
| `insightVip`      | 1 个     | 如果负载均衡模式是metallb，则需要指定一个VIP，供给GLobal集群的insight数据收集入口使用，子集群的insight-agent可上报数据到这个VIP |
| 网络速率          | 1000 M/s | 不低于千兆，建议万兆。                                       |
| 协议              | -        | 支持 IPv6 。                                                 |
| ip 地址范围       | -        | 服务器不得使用 172.16-32 网段的 ip，如果已经使用，无法更改，就需要修改每一台服务器上的 docker 的配置，加上 bip 参数，躲过这个 ip 段。Kubernetes 集群使用 10.96.0.0/12 作为 cluster IP 范围段，客户不能使用。 |
| 路由              | -        | 服务器有 default 或指向 0.0.0.0 这个地址的路由。             |