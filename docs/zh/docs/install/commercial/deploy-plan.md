# 部署规划

部署 DCE 5.0 时需要先做好软件规划、硬件规划、网络规划。

## 软件规划

| **架构** | **操作系统**        | **内核版本**                               | 备注                    |
| -------- | ------------------- | ------------------------------------------ | ----------------------- |
| AMD 64   | centos 7.X          | Kernel 3.10.0-1127.el7.x86_64 on an x86_64 | 操作系统推荐 CentOS 7.9 |
|          | Redhat 8.X          | 4.18.0-305.el8.x86_64                      | 操作系统推荐 Redhat 8.4 |
|          | Redhat 7.X          | 3.10.0-1160.e17.x86                        | 操作系统推荐 Redhat 7.9 |
|          | Redhat 7.X          | 3.10.0-1160.e17.x86                        | 操作系统推荐 Redhat 7.9 |
| ARM 64   | 银河麒麟 OS V10 SP2 | 4.19.90-24.4.v2101.ky10.aarch64            | -                       |

## 硬件规划

| **类型** | **具体要求**                |
| -------- | --------------------------- |
| CPU      | 不得超售                    |
| 内存     | 不得超售                    |
| 硬盘     | IOPS > 500 吞吐量 >200 MB/s |

资源要求，可以参考 [准备工作](./prepare.md)

## 网络规划

假如使用 metallb 作为全局集群的负载均衡方式：

| **资源**          | **要求**   | **说明**                                                                                                                                 |
| ----------------- | ---------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| `istioGatewayVip` | 1 个       | 如果负载均衡模式是 metallb，则需要指定一个 VIP，供给 DCE 的 UI 界面和 OpenAPI 访问入口                                                   |
| `insightVip`      | 1 个       | 如果负载均衡模式是 metallb，则需要指定一个 VIP，供给 GLobal 集群的 insight 数据收集入口使用，子集群的 insight-agent 可上报数据到这个 VIP |
| 网络速率          | 1000 M/s   | 不低于千兆，建议万兆。                                                                                                                   |
| 协议              | -          | 支持 IPv6。                                                                                                                              |
| 保留 IP 地址段    | 需保留两段 | 供 Pod（默认 10.233.64.0/18） 和 Service （默认 10.233.0.0/18 使用）。如果已经在使用了，可以自定义其他网段避免 IP 地址冲突。             |
| 路由              | -          | 服务器有 default 或指向 0.0.0.0 这个地址的路由。                                                                                         |
| NTP 服务地址      | 1~4 个     | 确保您的数据中心有可以访问的 NTP 服务器 IP 地址。                                                                                        |
| DNS 服务地址      | 1~2 个     | 如果您的应用需要 DNS 服务，请准备可以访问 DNS 服务器 IP 地址。                                                                           |

## 客户端浏览器的要求

- Firefox **≥** 49
- Chrome **≥** 54
