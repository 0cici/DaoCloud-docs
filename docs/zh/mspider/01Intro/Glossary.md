# 服务网格常见术语

此处介绍有关服务网格的术语。

- 集群（CLUSTER）

    集群是运行容器化应用程序的一组计算节点。 通常，组成集群的计算节点彼此可以直接连接。集群通过规则或策略限制外部访问。

- 控制平面（CONTROL PLANE）

    控制平面是一组系统服务，这些服务配置网格或者网格的子网来管理工作负载实例之间的通信。单个网格中控制平面的所有实例共享相同的配置资源。

- CRDs

    自定义资源定义 (CRD) 是默认的 Kubernetes API 扩展，服务网格使用 Kubernetes CRD API 来进行配置。

- 数据平面（DATA PLANE）

    数据平面是网格的一部分，直接控制工作负载实例之间的通信。服务网格的数据平面使用智能 Envoy 代理部署成边车去调节和控制服务网格中发送和接受的流量。

- 目标服务（DESTINATION）

    目标服务是 envoy 代表一个源服务工作负载与之打交道的远程上游服务。这些上游服务可以有多个服务版本，envoy 根据路由选择对应的版本。

- 目标规则（DestinationRule）

    目标规则定义了在路由发生后应用于服务的流量策略。这些规则指定负载均衡的配置、来自边车代理的连接池大小以及异常检测设置，从而实现从负载均衡池中检测和熔断不健康的主机。

- ENVOY
  
    Envoy 是在服务网格里使用的高性能代理，用于为所有服务网格里的服务调度进出的流量。

- 外部控制平面（EXTERNAL CONTROL PLANE）
  
    External Control Plane 是从外部管理运行在自己的 Cluster 或者其他基础设施中的网格工作负载的 Control Plane。
    Control Plane 可以部署在一个 Cluster 中，尽管不能部署在它所控制的网格的一部分 Cluster 中。
    它的目的是将 Control Plane 与网格的 Data Plane 完全分离。

- 网关规则（GATEWAY）

    网关规则（Gateway）定义了在网格南北向连接操作的负载均衡器，用于建立入站和出站的 HTTP/TCP 访问连接。
    它描述了需要公开的一组端口、服务域名、协议类型、负载均衡器的 SNI 配置等信息。

- 托管控制平面（MANAGED CONTROL PLANE）
  
    托管控制平面是一个为客户提供管理的控制平面。
    托管控制平面降低了用户部署的复杂性，并通常保证一定水平的性能和可用性。

- 托管网格（MANAGED MESH）

    由服务网格在所选集群创建并托管的控制平面。具备简单、低成本、高可用、无需单独运维管理 的特点。

- OPERATOR

    Operator 是打包，部署和管理 Kubernetes 应用程序的一种方法。

- PILOT

    Pilot 是服务网格里的一个组件，它控制 Envoy 代理，负责服务发现、负载均衡和路由分发。

- POD

    Pod 中包含了一个或多个共享存储和网络的容器（例如 Docker 容器），以及如何运行容器的规范。
    Pod 是服务网格的 Kubernetes 部署中的一个工作负载实例。

- 主集群（MASTER CLUSTER）

    主集群是具有控制平面的集群。
    一个网格可以有一个以上的主集群，以用于 HA 或需要低延迟的场景。主集群可以充当工作集群的控制平面。

- 工作集群（WORKER CLUSTER）

    工作集群是一个连接到集群外部控制平面的集群。工作集群可以连接到主集群的控制平面，或连接到一个外部控制平面。

- 路由规则（ROUTING RULES）

    在虚拟服务中配置的路由规则，遵循服务网格定义了请求的路径。
    使用路由规则，可以定义将寻址到虚拟服务主机的流量路由到指定目标的工作负载。
    路由规则使您可以控制流量，以实现按百分比分配流量的分阶段等任务。

- SERVICE

    使用服务名称标识一组具有关联行为的服务服务网格，并使用这些名称应用服务网格策略（例如负载均衡和路由）。
    服务通常由一个或多个服务 Endpoint 实现，并且或许包含多个服务版本。

- 服务条目（ServiceEntry）

    服务条目用于将一个无法注册到服务注册表的网格内部服务（例如：vm）或网格外部服务器添加到服务网格抽象模型中。
    添加服务条目后，Envoy 代理可以将流量发送到该服务，这个服务条目将和网格中的其他服务一样。

- 服务网格（SERVICE MESH）

    服务网格（简称网格）是一个可管理、可观测以及支持工作负载实例之间进行安全通信的基础设施层。

    在一个网格中，服务名称与命名空间组合具有唯一性。
    例如，在一个多集群的网格中，cluster-1 集群的 foo 命名空间中的 bar 服务和 cluster-2 集群的 foo 命名空间中的 bar 服务被认为是同一个服务。

    由于服务网格会共享这种标识，因此同一服务网格内的工作负载实例可以相互认证通信。

- SERVICE NAME

    Service Name 是 service 唯一的名字，是 service 在服务网格里的唯一标识。
    一个服务不应该被重命名，或者维护它的标识，每一个服务名都是唯一的。一个服务有多个 versions，但是服务名是与版本独立的。

- SERVICE OPERATOR

    Service Operator 是在服务网格里管理 service 的代理，它们通过操纵配置状态并通过各种仪表板监视服务的运行状况来管理这些服务。

- 服务注册表（SERVICE REGISTRY）

    服务网格维护了一个内部服务注册表 (service registry)，它包含在服务网格中运行的一组服务及其相应的服务 endpoints。
    服务网格使用服务注册表生成 Envoy 配置。

- 虚拟服务（VirtualService）

    虚拟服务定义了一系列针对指定服务的流量路由规则。
    每个路由规则都针对特定协议定义流量匹配规则。
    如果流量符合这些特征，就会根据规则发送到服务注册表中的目标服务（或者目标服务的子集或版本）。

- 工作负载（WORKLOAD）

    工作负载是 operators 部署的二进制文件，用于提供服务网格应用的一些功能。
    工作负载有自己的名称、命名空间和唯一的 id。这些属性可以通过下面的属性被策略配置和遥测配置使用：
    
    - source.workload.name, source.workload.namespace, source.workload.uid
    
    - destination.workload.name, destination.workload.namespace, destination.workload.uid

- 工作负载实例（WORKLOAD INSTANCE）

    工作负载实例是工作负载的一个二进制实例化对象。一个工作负载实例可以开放零个或多个服务 endpoint， 也可以消费零个或多个服务。
    
    工作负载实例具有许多属性：

    - 名称和命名空间
    - 唯一的 ID
    - IP 地址
    - 标签
    - 主体

- 工作负载实例主体（WORKLOAD INSTANCE PRINCIPAL）

    工作负载实例主体是工作负载实例的可验证权限。服务网格的服务到服务身份验证用于生成工作负载实例主体。
    默认情况下，工作负载实例主体与 SPIFFE ID 格式兼容。
  